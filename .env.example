# VeriCrop Environment Configuration
# Copy this file to .env and customize as needed

# ============================================================================
# PostgreSQL Configuration (Batch Metadata Persistence)
# ============================================================================
POSTGRES_USER=vericrop
POSTGRES_PASSWORD=vericrop123
POSTGRES_DB=vericrop
POSTGRES_HOST=localhost
POSTGRES_PORT=5432

# Database Connection Pool Settings (HikariCP)
DB_POOL_SIZE=10
DB_CONNECTION_TIMEOUT=30000
DB_IDLE_TIMEOUT=600000
DB_MAX_LIFETIME=1800000

# ============================================================================
# JWT Authentication Configuration
# ============================================================================
# IMPORTANT: Set a strong secret in production (minimum 32 characters)
# If not set, a secure random key is generated on each startup
JWT_SECRET=
# Token expiration in milliseconds (default: 24 hours = 86400000ms)
JWT_EXPIRATION=86400000

# ============================================================================
# Kafka Configuration (Event Messaging)
# ============================================================================
KAFKA_BOOTSTRAP_SERVERS=localhost:9092
KAFKA_ENABLED=true  # Set to true to enable Kafka integration
KAFKA_ACKS=all  # all, 1, or 0
KAFKA_RETRIES=3
KAFKA_IDEMPOTENCE=true
KAFKA_BATCH_SIZE=16384
KAFKA_LINGER_MS=10
KAFKA_BUFFER_MEMORY=33554432

# Kafka Topics
KAFKA_TOPIC_BATCH_EVENTS=batch-events
KAFKA_TOPIC_QUALITY_ALERTS=quality-alerts
KAFKA_TOPIC_LOGISTICS_EVENTS=logistics-events
KAFKA_TOPIC_BLOCKCHAIN_EVENTS=blockchain-events

# ============================================================================
# ML Service Configuration (FastAPI Quality Prediction)
# ============================================================================
ML_SERVICE_URL=http://localhost:8000
ML_SERVICE_TIMEOUT=30000
ML_SERVICE_RETRIES=3
ML_SERVICE_RETRY_DELAY=1000
VERICROP_LOAD_DEMO=true  # Use demo mode for ML service when model not available

# ============================================================================
# VeriCrop Application Mode
# ============================================================================
VERICROP_MODE=dev  # dev (fast startup) or prod (full blockchain validation)
KAFKA_ENABLED_FALLBACK=false  # Set to true to enable Kafka integration (safe default for dev)

# ============================================================================
# Airflow Configuration
# ============================================================================
AIRFLOW_ADMIN_USERNAME=admin
AIRFLOW_ADMIN_PASSWORD=admin
AIRFLOW_DB_USER=airflow
AIRFLOW_DB_PASSWORD=airflow123
AIRFLOW_DB_NAME=airflow

# ============================================================================
# VeriCrop API Configuration
# ============================================================================
VERICROP_API_URL=http://vericrop-gui:8080
SERVER_PORT=8080

# ============================================================================
# Ledger Configuration
# ============================================================================
LEDGER_PATH=/app/ledger

# ============================================================================
# Quality Evaluation Configuration
# ============================================================================
QUALITY_PASS_THRESHOLD=0.7

# ============================================================================
# Logging Configuration
# ============================================================================
LOG_LEVEL=INFO
LOG_FILE_PATH=logs/vericrop-gui.log
LOG_PATTERN=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
